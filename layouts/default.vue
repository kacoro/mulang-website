<template>
  <div id="__wrap">
    <div class="page-header">
      <div class="header-content">
        <nuxt-link to="/">
        <img src="/images/logo.png" class="logo" />
        </nuxt-link>
        <div class="left-part">
          
           <div class="menu-item menu-item-core">
            <nuxt-link to="/yunfan" class="menu-name">云帆创新应用平台</nuxt-link> <span class="nav-line"></span>
          </div>
          <div class="menu-item menu-item-core">
            <nuxt-link to="/dajiang" class="menu-name">核心技术</nuxt-link> <span class="nav-line"></span>
            <div class="menu-popover" >
              <div class="menu-popover-item">
                <ul> 
                    <li>
                        <nuxt-link to="/dajiang" class="menu-name">大匠</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/yunqi" class="menu-name">云启</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                     <li>
                        <nuxt-link to="/yunfan" class="menu-name">索特云</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="menu-item menu-item-core">
            <nuxt-link to="/solution" class="menu-name">解决方案</nuxt-link>
            <span class="nav-line"></span>
            <div class="menu-popover" >
              <div class="menu-popover-item">
                <ul> 
                    <h6>
                      通用园区
                    </h6>
                    <li>
                        <nuxt-link to="/solution/1" class="menu-name">园区管理</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/solution/2" class="menu-name">校园管理</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                     <li>
                        <nuxt-link to="/solution/3" class="menu-name">医院管理</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/solution/4" class="menu-name">智慧社区</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/solution/5" class="menu-name">写字楼</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/solution/6" class="menu-name">政府机关</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                </ul>
                <ul> 
                    <h6>
                      城市治理
                    </h6>
                    <li>
                        <nuxt-link to="/solution/7" class="menu-name">社会价值</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/solution/8" class="menu-name">方案能力</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                     <li>
                        <nuxt-link to="/solution/9" class="menu-name">区域公共安全</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/solution/10" class="menu-name">机关事务管理</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/solution/11" class="menu-name">智慧食药监</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/solution/12" class="menu-name">疫情防控</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                     
                </ul>
              </div>
            </div>
          </div>
          <div class="menu-item menu-item-core">
            <nuxt-link to="/product" class="menu-name">产品中心</nuxt-link> <span class="nav-line"></span>
             <div class="menu-popover" >
             <div class="menu-popover-item">
                <ul> 
                    <h6>
                      IOT产品
                    </h6>
                    <li>
                        <nuxt-link to="/product/1" class="menu-name">IPC摄像机系列</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/product/2" class="menu-name">人脸终端系列</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                     <li>
                        <nuxt-link to="/product/3" class="menu-name">停车场出入管理系列</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/product/4" class="menu-name">速通门系列</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/product/5" class="menu-name">智能门锁系列</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/product/6" class="menu-name">门禁读卡器系列</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                </ul>
                <ul> 
                    <h6>
                      云
                    </h6>
                    <li>
                        <nuxt-link to="/product/7" class="menu-name">结构化服务器</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/product/8" class="menu-name">软件平台</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                </ul>
              </div>
               </div>
          </div>
          <div class="menu-item menu-item-core">
            <nuxt-link to="/news" class="menu-name">新闻资讯</nuxt-link> <span class="nav-line"></span>
          </div>
          <div class="menu-item menu-item-core">
            <nuxt-link to="/about" class="menu-name">关于我们</nuxt-link> <span class="nav-line"></span>
            <div class="menu-popover" >
              <div class="menu-popover-item">
                <ul> 
                    <li>
                        <nuxt-link to="/about" class="menu-name">关于CST</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                      <li>
                        <nuxt-link to="/contact" class="menu-name">联系我们</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                     <li>
                        <nuxt-link to="/joinus" class="menu-name">加入我们</nuxt-link> 
                        <span class="nav-line"></span>
                      </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <Nuxt />
    <div class="messages">
      <div class="messages-wrap">
        <h1 style="font-size:.41rem">如想加入我们，您可留下您的信息，我们取得您的信息后将会与您联系</h1>
        <div class="messages-content">
          <div class="messages-content-left">
            <p>深圳市看索特软件有限公司</p>
            <p>&nbsp;</p>
            <p style="font-size: 30px; font-weight: bold">400-0755-972</p>
            <p>&nbsp;</p>
            <p>commsoft@commsoft.com.cn</p>
            <p>&nbsp;</p>
            <p>深圳市南山区高新南九道10号</p>
            <p>深圳湾科技生态园10栋A座27F</p>
          </div>
          <form @submit.prevent="submitFrom" class="messages-form">
            <div class="messages-form-content">
              <div class="messages-form-input">
                <input
                  name="name"
                  v-model="usernameOrEmail"
                  placeholder="您的姓名"
                />
                <input type="email" placeholder="您的邮箱" />
              </div>
              <div  class="messages-form-input">
                <input type="tel" v-model="password" placeholder="您的电话" />
                <input type="company" placeholder="公司名称" />
              </div>
              <div  class="messages-form-input">
                <textarea name="address" placeholder="您的地址"></textarea>
              </div>
            </div>
            <div class="text-align-right">
              <button type="submit" class="button radius mid">立即提交</button>
            </div>
          </form>
        </div>
      </div>
    </div>
     <div class="page-footer">
      <div>
        <img src="/images/logo-footer.png" class="footer-logo" />
        <p>公司地址：深圳市南山区高新南九道10号<br/><span style="padding-left:5em;">深圳湾科技生态园10栋Ａ座27F</span></p>
        <p>官方热线：400-0755-972</p>
        <p>官方邮箱：commsoft@commsoft.com.cn</p>
      </div>
      <div>
          <h4>商务合作</h4>
          <p>售前咨询：  400-xxxxxxxx</p>
          <p>商务合作：  xxxxxxxx</p>
          <p>媒体合作：  xxxxxxxxxx</p>
          <p>供应商合作：  xxxxxxxxxxx</p>
      </div>
       <div class="links">
          <h4>相关链接</h4>
          <NuxtLink :to="`about`">关于我们</NuxtLink>
          <NuxtLink :to="`coretech`">核心技术</NuxtLink>
          <NuxtLink :to="`yunfan`">云帆创新技术平台</NuxtLink>
          <NuxtLink :to="`product`">产品中心</NuxtLink>
          <NuxtLink :to="`solutions`">解决方案</NuxtLink>
      </div>
      <div>
          <h4>新闻媒体</h4>
          加入我们
      </div>
    </div>
  </div>
</template>
<style scoped>
.page-header .left-part .menu-item .menu-name {
    font-size: 16px;
    text-decoration: none;
    color: #fff;
}

.page-header .left-part .menu-item .menu-name:hover{
   color: #f3cd1d;
}
.page-header .left-part .menu-item .menu-name:active{
  color: #fff;
}

.page-header .left-part .menu-item .menu-name.nuxt-link-active{
    color: #f3cd1d;
}

.page-header .left-part {
  align-items: center;
  display: inline-block;
    vertical-align: top;
    margin-left: 120px;
    margin-right: 50px;
   width: 1135px;
    max-width: 1135px;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
}
.page-header .left-part .menu-item {
    position: relative;
    display: inline-block;
    text-align: center;
    font-size: 14px;
    cursor: pointer;
    color: #fff;
    padding: 0 10px;
    margin: 0 5px;
    overflow: hidden;

}
.page-header .left-part .menu-item:hover{
  overflow:unset;
}



.page-header .left-part .menu-item .menu-popover {
    opacity: 1;
    position: absolute;
    cursor: default;
    top: 110px;
    left: -50px;
    z-index: 1;
    padding: 18px 25px 24px;
    border-radius: 0 0 1px 1px;
    color: #fff;
    background: #19459a;
    box-shadow: 0 4px 4px 0 rgba(0,0,0,.1);
    line-height: 24px;
    text-align: center;
    transition: all .5s ease;

}
.page-header .left-part .menu-item:hover .menu-popover{
    opacity: 1;
    top: 100px;
    display: block;
}
.page-header .left-part .menu-item .menu-popover ul{
   padding:0 25px;
}
.page-header .left-part .menu-item .menu-popover li,.page-header .left-part .menu-item .menu-popover h6{
  width: 94px;
  line-height:50px ;
      min-width: 94px;
    white-space: nowrap;
}
.page-header .left-part .menu-item .menu-popover h6{
  font-size: 16px;
  border-bottom: #f3cd1d solid 1px;
  color: #f3cd1d;
}
.page-header .left-part .menu-item .menu-popover a{
   color: #fff;
}
.menu-popover-item{
  display: flex;

}
</style>
<script>
import { request, gql, GraphQLClient, rawRequest } from "graphql-request";

const postQuery = gql`
  mutation Login($password: String!, $usernameOrEmail: String!) {
    login(password: $password, usernameOrEmail: $usernameOrEmail) {
      errors {
        field
        message
      }
      user {
        id
        email
      }
    }
  }
`;

export default {
  data() {
    return {
      password: "",
      usernameOrEmail: "",
    };
  },
  mounted:function(){
      // 此处的16跟上面的16对应，同样是倍数
    const baseSize = 100
    // 设置根节点的font-size大小函数
    function setRem () {
        // 375为设计稿页面宽度，如为750，把375改为750
        const scale = document.documentElement.clientWidth / 1920
        // 设置页面根节点字体大小
        document.documentElement.style.fontSize = (baseSize * Math.min(scale, 2)) + 'px'
    }
    // 初始化
    setRem()
    // 改变窗口大小时重新设置根节点的font-size大小
    window.onresize = function () {
        setRem()
    }

  },
  destroyed:function(){
    window.onresize = null;
  },
  methods: {
    async submitFrom(e) {
      console.log("test2");

      const graphQLClient = new GraphQLClient(
        "http://192.168.56.1:4000/graphql",
        {
          credentials: "include",
          mode: "cors",
        }
      );
      const { data, status } = await graphQLClient.rawRequest(postQuery, {
        password: this.password,
        usernameOrEmail: this.usernameOrEmail,
      });
      e.preventDefault();
     
      console.log(data, status);

      if (status === 200) {
        alert("登陆成功");
        // this.$router.push({
        //   path: `/`,
        // });
      }
    },
  }
}
</script>